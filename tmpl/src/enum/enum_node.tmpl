{{g
//*** {{includeName}}
}}

func (tmpl *EnumNodeTemplate)gen(table *model.Enum, _w io.Writer) (err error) {
    if err = tmpl.genHeader(table, _w); err != nil { return }
    if err = tmpl.genPrivate(table, _w); err != nil { return }
    if err = tmpl.genLeafNodes(table, _w); err != nil { return }
    if err = tmpl.genGob(table, _w); err != nil { return }
    return
}

func (tmpl *EnumNodeTemplate)genHeader(table *model.Enum, _w io.Writer) (err error) {

{{
// Code generated by goradd-orm. DO NOT EDIT.

package node

import (
    "encoding/gob"
	"github.com/goradd/orm/pkg/query"
)

// {{= table.Identifier}}NodeI is the builder interface to the {{= table.Identifier}} nodes.
type {{= table.Identifier}}NodeI interface {
    query.NodeI
    PrimaryKeyNode() *query.ColumnNode
{{for i := 0; i < len(table.Fields); i++}}
    {{= table.FieldIdentifier(i) }}() *query.ColumnNode
{{for}}
}

type {{= table.DecapIdentifier }}Enum struct {
}

type {{= table.DecapIdentifier }}Reference struct {
    {{= table.DecapIdentifier}}Enum
    query.ReferenceNode
}

{{# No easy way to determine if this is needed, so just make it in case. }}
type {{= table.DecapIdentifier}}Association struct {
    {{= table.DecapIdentifier}}Enum
    query.ManyManyNode
}

// PrimaryKeyNode returns a node representing the primary key column.
func (n {{= table.DecapIdentifier }}Enum) PrimaryKeyNode() (*query.ColumnNode) {
	return n.{{= table.FieldIdentifier(0) }}()
}

func (n {{= table.DecapIdentifier }}Reference) PrimaryKeyNode() (*query.ColumnNode) {
	return n.{{= table.FieldIdentifier(0) }}()
}

func (n {{= table.DecapIdentifier }}Association) PrimaryKeyNode() (*query.ColumnNode) {
	return n.{{= table.FieldIdentifier(0) }}()
}



func init() {
   gob.Register(new({{= table.DecapIdentifier }}Enum))
   gob.Register(new({{= table.DecapIdentifier }}Association))
   gob.Register(new({{= table.DecapIdentifier }}Reference))
}

}}

    return
}


func (tmpl *EnumNodeTemplate)genPrivate(table *model.Enum, _w io.Writer) (err error) {
{{
// SelectNodes_ is used internally by the framework to return the list of column nodes.
func (n {{= table.DecapIdentifier }}Enum) SelectNodes_() ([]*query.ColumnNode) {
    return []*query.ColumnNode {
{{for i := 0; i < len(table.Fields); i++}}
	    n.{{= table.FieldIdentifier(i) }}(),
{{for}}
	}
}

func (n {{= table.DecapIdentifier}}Enum) NodeType_() query.NodeType {
	return query.EnumNodeType
}

func (n *{{= table.DecapIdentifier}}Association) NodeType_() query.NodeType {
	return query.ManyEnumNodeType
}

// TableName_ returns the query name of the table the node is associated with.
func (n {{= table.DecapIdentifier }}Enum) TableName_() string {
    return "{{= table.QueryName }}"
}

// TableName_ returns the query name of the table the node is associated with.
func (n {{= table.DecapIdentifier }}Association) TableName_() string {
    return n.Parent().TableName_()
}

// TableName_ returns the query name of the table the node is associated with.
func (n {{= table.DecapIdentifier }}Reference) TableName_() string {
    return n.Parent().TableName_()
}


// DatabaseKey_ returns the database key of the database the node is associated with.
func (n {{= table.DecapIdentifier }}Enum) DatabaseKey_() string {
    return "{{= table.DbKey }}"
}

}}
    return
}

func (tmpl *EnumNodeTemplate)genLeafNodes(table *model.Enum, _w io.Writer) (err error) {

    for i := 0; i < len(table.Fields); i++ {
        fn := table.FieldIdentifier(i)
{{

func (n {{= table.DecapIdentifier }}Enum) {{= fn }}() *query.ColumnNode {
	cn := &query.ColumnNode{
		QueryName: "{{= table.FieldQueryName(i) }}",
		Identifier: "{{= fn }}",
		ReceiverType: query.{{= table.FieldReceiverType(i).String() }},
		IsPrimaryKey: {{if i == 0 }}true{{else}}false{{if}},
	}
	cn.SetParent(n)
	return cn
}

func (n *{{= table.DecapIdentifier }}Reference) {{= fn }}() *query.ColumnNode {
	cn := n.{{= table.DecapIdentifier }}Enum.{{= fn }}()
	cn.SetParent(n)
	return cn
}

func (n *{{= table.DecapIdentifier }}Association) {{= fn }}() *query.ColumnNode {
	cn := n.{{= table.DecapIdentifier }}Enum.{{= fn }}()
	cn.SetParent(n)
	return cn
}

}}
    }
    return
}

func (tmpl *EnumNodeTemplate)genGob(table *model.Enum, _w io.Writer) (err error) {
{{
func (n {{= table.DecapIdentifier }}Enum) GobEncode() (data []byte, err error) {
	return
}

func (n *{{= table.DecapIdentifier }}Enum) GobDecode(data []byte) (err error) {
	return
}

func (n *{{= table.DecapIdentifier}}Reference) GobEncode() (data []byte, err error) {
	var buf bytes.Buffer
	e := gob.NewEncoder(&buf)

	if err = e.Encode(&n.ReferenceNode); err != nil {
		panic(err)
	}
	data = buf.Bytes()
	return
}

func (n *{{= table.DecapIdentifier}}Reference) GobDecode(data []byte) (err error) {
	buf := bytes.NewBuffer(data)
	dec := gob.NewDecoder(buf)

	if err = dec.Decode(&n.ReferenceNode); err != nil {
		panic(err)
	}
	return
}

func (n *{{= table.DecapIdentifier}}Association) GobEncode() (data []byte, err error) {
	var buf bytes.Buffer
	e := gob.NewEncoder(&buf)

	if err = e.Encode(&n.ManyManyNode); err != nil {
		panic(err)
	}
	data = buf.Bytes()
	return
}

func (n *{{= table.DecapIdentifier}}Association) GobDecode(data []byte) (err error) {
	buf := bytes.NewBuffer(data)
	dec := gob.NewDecoder(buf)

	if err = dec.Decode(&n.ManyManyNode); err != nil {
		panic(err)
	}
	return
}
}}
    return
}